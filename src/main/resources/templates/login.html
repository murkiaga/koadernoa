<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="eu">
<head>
  <meta charset="UTF-8">
  <title>Koadernoa Â· Saioa hasi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" th:href="@{/css/login.css}">
</head>
<body>
  <main class="login-wrap">
    <section class="login-card" aria-label="Saioa hasteko panela">
      <div class="brand">
        <img th:if="${appLogoUrl != null and !#strings.isEmpty(appLogoUrl)}"
             th:src="${appLogoUrl}"
             alt="Ikastetxeko logoa"
             class="brand-logo">

        <h1 class="title">Koadernoa</h1>
        <p class="subtitle">Aukeratu saioa hasteko modua</p>
      </div>

      <div th:if="${param.disabled}" class="login-alert login-alert-error">
        Autentikazio mota ez dago aktibo edo ez dago konfiguratuta.
      </div>
      <div th:if="${param.error}" class="login-alert login-alert-error">
        Erabiltzailea edo pasahitza ez da zuzena.
      </div>
      <div th:if="${param.logout}" class="login-alert login-alert-success">
        Saioa itxi da.
      </div>

      <div class="login-actions">
        <a class="oauth-btn google-btn"
           th:if="${googleEnabled and googleConfigured}"
           href="/oauth2/authorization/google">
          <span class="google-dot" aria-hidden="true"></span>
          Google bidez hasi saioa
        </a>

        <a class="oauth-btn azure-btn"
           th:if="${adEnabled and adConfigured}"
           href="/oauth2/authorization/ad">
          <span class="azure-dot" aria-hidden="true"></span>
          Active Directory bidez hasi saioa
        </a>

        <form class="login-form"
              th:if="${ldapEnabled and ldapConfigured}"
              th:action="@{/login}"
              method="post">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
          <div class="login-field">
            <label for="ldap-username">Erabiltzailea</label>
            <input id="ldap-username" name="username" type="text" autocomplete="username" required>
          </div>
          <div class="login-field">
            <label for="ldap-password">Pasahitza</label>
            <input id="ldap-password" name="password" type="password" autocomplete="current-password" required>
          </div>
          <button class="oauth-btn ldap-btn" type="submit">LDAP bidez hasi saioa</button>
        </form>
      </div>

      <p class="hint"
         th:if="${!(googleEnabled and googleConfigured) and !(adEnabled and adConfigured) and !(ldapEnabled and ldapConfigured)}">
        Ez dago autentikazio motarik aktibo. Jarri harremanetan administrazioarekin.
      </p>

      <p class="hint"
         th:if="${(googleEnabled and googleConfigured) or (adEnabled and adConfigured) or (ldapEnabled and ldapConfigured)}">
        Arazoak badituzu, jarri harremanetan administrazioarekin.
      </p>
    </section>
  </main>
</body>
</html>
